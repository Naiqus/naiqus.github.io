<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Eclipse Grafiti Learning Notes &#8211; Wake up, Naiqus!</title>
<meta name="description" content="Trying to develop a GUI in form of an Eclipse plugin at my HiWi job. At last I chose a more recent tool, "Graphiti". This are the notes taken from the tutorials as well as the procedure of development.">
<meta name="keywords" content="eclipse, graphiti, notes">



<!-- Twitter Cards -->
<meta name="twitter:title" content="Eclipse Grafiti Learning Notes">
<meta name="twitter:description" content="Trying to develop a GUI in form of an Eclipse plugin at my HiWi job. At last I chose a more recent tool, "Graphiti". This are the notes taken from the tutorials as well as the procedure of development.">
<meta name="twitter:site" content="@naiqus">
<meta name="twitter:creator" content="@naiqus">

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://naiqus.github.io/images/lamp.jpg">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Eclipse Grafiti Learning Notes">
<meta property="og:description" content="Trying to develop a GUI in form of an Eclipse plugin at my HiWi job. At last I chose a more recent tool, "Graphiti". This are the notes taken from the tutorials as well as the procedure of development.">
<meta property="og:url" content="http://naiqus.github.io/eclipse-grafiti-notes/">
<meta property="og:site_name" content="Wake up, Naiqus!">





<link rel="canonical" href="http://naiqus.github.io/eclipse-grafiti-notes/">
<link href="http://naiqus.github.io/feed.xml" type="application/atom+xml" rel="alternate" title="Wake up, Naiqus! Feed">
<link rel="author" href="http://plus.google.com/+sootsan?rel=author">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="http://naiqus.github.io/assets/css/main.css">

<meta http-equiv="cleartype" content="on">

<!-- HTML5 Shiv and Media Query Support -->
<!--[if lt IE 9]>
	<script src="http://naiqus.github.io/assets/js/vendor/html5shiv.min.js"></script>
	<script src="http://naiqus.github.io/assets/js/vendor/respond.min.js"></script>
<![endif]-->

<!-- Modernizr -->
<script src="http://naiqus.github.io/assets/js/vendor/modernizr-2.7.1.custom.min.js"></script>

<link href='//fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700%7CPT+Serif:400,700,400italic' rel='stylesheet' type='text/css'>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://naiqus.github.io/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="http://naiqus.github.io/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://naiqus.github.io/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://naiqus.github.io/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://naiqus.github.io/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://naiqus.github.io/images/apple-touch-icon-144x144-precomposed.png">

</head>

<body class="post">

<!--[if lt IE 9]><div class="browser-upgrade alert alert-info">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div><![endif]-->

<div class="navigation-wrapper">
	<div class="site-name">
		<a href="http://naiqus.github.io">Wake up, Naiqus!</a>
	</div><!-- /.site-name -->
	<div class="top-navigation">
		<nav role="navigation" id="site-nav" class="nav">
		    <ul>
		        
					    
					        
					    
					    <li><a href="http://naiqus.github.io/about/" >About</a></li>
					  
					    
					        
					    
					    <li><a href="http://naiqus.github.io/posts/" >All Posts</a></li>
					  
		    </ul>
		</nav>
	</div><!-- /.top-navigation -->
</div><!-- /.navigation-wrapper -->


  <div class="image-wrap">
  <img src=
    
      "http://naiqus.github.io/images/lamp.jpg"
    
  alt="Eclipse Grafiti Learning Notes feature image">
  
  </div><!-- /.image-wrap -->


<div id="main" role="main">
  <div class="article-author-side">
    



	<img src="http://naiqus.github.io/images/mao.jpg" class="bio-photo" alt="Naiqus bio photo">

<h3>Naiqus</h3>
<p>Wake up man, wake up!!!</p>

<a href="http://twitter.com/naiqus" class="author-social" target="_blank"><i class="fa fa-fw fa-twitter-square"></i> Twitter</a>
<a href="http://facebook.com/suqian.zhang" class="author-social" target="_blank"><i class="fa fa-fw fa-facebook-square"></i> Facebook</a>
<a href="http://plus.google.com/+sootsan" class="author-social" target="_blank"><i class="fa fa-fw fa-google-plus-square"></i> Google+</a>



<a href="http://github.com/naiqus" class="author-social" target="_blank"><i class="fa fa-fw fa-github"></i> Github</a>








  </div>
  <article class="post">
    <div class="headline-wrap">
      
        <h1><a href="http://naiqus.github.io/eclipse-grafiti-notes/" rel="bookmark" title="Eclipse Grafiti Learning Notes">Eclipse Grafiti Learning Notes</a></h1>
      
    </div><!--/ .headline-wrap -->
    <div class="article-wrap">
      <section id="table-of-contents" class="toc">
  <header>
    <h3>Overview</h3>
  </header>
<div id="drawer">
<ul id="markdown-toc">
  <li><a href="#introduction">Introduction</a></li>
  <li><a href="#installation">Installation</a></li>
  <li><a href="#need-to-kown">Need to kown</a>    <ul>
      <li><a href="#architecture">Architecture:</a></li>
    </ul>
  </li>
  <li><a href="#hands-on-a-simple-example">Hands-on: A simple example</a>    <ul>
      <li><a href="#plug-in-structure">Plug-In structure:</a></li>
      <li><a href="#create-plug-in">1. Create Plug-in</a></li>
      <li><a href="#diagram-type-agent">2. Diagram Type Agent</a>        <ul>
          <li><a href="#create-a-diagram-type-provider">Create a Diagram Type Provider</a></li>
          <li><a href="#create-a-new-diagram-type-of-the-provider">Create a new Diagram Type of the Provider</a></li>
          <li><a href="#create-a-feature-provider">Create a Feature Provider</a></li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

  </div>
</section>
<!-- /#table-of-contents -->

<hr />

<h2 id="introduction">Introduction</h2>
<blockquote>
  <p>It is immediately noticeable, that GEF is fairly complex and it needs a notable amount of work to get used to the framework. Therefore, and also to homogenize their tooling, SAP built a framework that hides GEF’s complexities from the developer and bridges EMF and GEF to ease and speed up the development of graphical editors. </p>
</blockquote>

<hr />

<h2 id="installation">Installation</h2>
<p>The installation source of the updatest release is included in the official release update channel. Install the “Graphiti SDK Plus” which includes a tutorial in the help document.</p>

<hr />

<h2 id="need-to-kown">Need to kown</h2>

<h3 id="architecture">Architecture:</h3>

<p><img src="/images/grafiti-architecture.png" alt="Basic Architecture" /></p>

<ol>
  <li><strong>Interaction Component</strong>: deal with the requests of input (from mouse, keyboard), like click, drag-and-drop, etc. Passing them to Diagram Type Agent. </li>
  <li><strong>Rendering Engine</strong>: to display the current data on the screen. Based on GEF in conjuction with Draw2d.</li>
  <li>
    <p><strong>Diagram Type Agent</strong>: has to be implemented by developer and could make use of a lot of services as well as standard implementations. With these implementations (Actions like <em>move, resize, delete, remove and print</em>), one can build a functional editor very quickly. It could also be incrementally implemented in the further development. The major task of Diagram Type Agent is to modify the model data. Servaral models are applied there as follows:</p>

    <ul>
      <li><strong>Domain Model</strong>: contains the model which needs to be graphically displayed. A <em>.ecore</em> model for example could be used here. In Graphiti, the data of Domain model is called <strong>Business Objects</strong>.</li>
      <li><strong>Protogram Model</strong>: ? contains all the information for displaying a diagram. Needs some redundant storage of data. Not quite clear. complish this part late.</li>
      <li><strong>Link Model</strong>: the relation between Domain Model and Protogram Model. Connecting data from Domain Model to the graphical representation from Protogram Model. This is necessory for some actions on the editor, like moving and deleting objects, which changes data of Domain Model as well.</li>
    </ul>
  </li>
</ol>

<p>Example: User clicks on a kind of “Create” tool on the tools palette and draws a rectangle in the editor which indicates a rectangle object with the specified size and position should be created. Then the Diagram Type Agent act as following:</p>

<ul>
  <li>Create a new object in the Domain Model,</li>
  <li>Create the graphical visualization in the Pictogram Model. E.g. create Graphics Algorithms like a Rounded Rectangle. Initial them with colors and fonts and the layout.</li>
  <li>Create link between the Pictogram Model and Domain Model.</li>
</ul>

<p><img src="/images/diagram-type-agent-new.png" alt="Inside Diagram Type Agent" /></p>

<p><strong>Features</strong> are needed from developers like operations. <strong>Feature Provider</strong> supplies the needed features. Processing the features leads to modifing the datas in the models. <em>*Diagram Type Provider</em> handels the requests from interactive components. It also decides when to synchronise the Domain and Pictogram Models.</p>

<p>The <strong>Diagram Type Agent</strong> is implemented in 4 steps:</p>

<ol>
  <li>Implement a <em>Diagram Type Provider</em></li>
  <li>Register it for a new <em>Diagram Type</em>.</li>
  <li>Create a <em>Feature Provider</em>.</li>
  <li>Create Feature, for example: <em>Add Feature</em>.</li>
</ol>

<hr />

<h2 id="hands-on-a-simple-example">Hands-on: A simple example</h2>

<p>Get familier with the Graphiti plugin development procedure with help of the official tutorial, step by step.</p>

<blockquote>
  <h3 id="plug-in-structure">Plug-In structure:</h3>
  <ul>
    <li><strong>org.eclipse.graphiti</strong>
<em>The UI platform independent part of the framework</em></li>
    <li><strong>org.eclipse.graphiti.ui</strong>
<em>The UI platform dependent part of the framework</em></li>
    <li><strong>org.eclipse.graphiti.mm</strong>
<em>The Graphiti EMF model</em></li>
    <li><strong>org.eclipse.graphiti.pattern</strong>
<em>Additional Graphiti framework for an alternative approach to combine all implementation aspects in one pattern instead of spreading accross several features.</em></li>
    <li><strong>org.eclipse.graphiti.export.batik</strong>
<em>The framework export functionality, e.g. save as SVG (using Batik functionality)</em></li>
    <li><strong>org.eclipse.graphiti.doc</strong>
<em>The Eclipse help content, e.g. the Graphiti tutorial</em></li>
    <li><strong>org.eclipse.graphiti.examples.common</strong>
<em>General parts of samples and test tools for Graphiti; helper UIs, e.g. repository explorer and wizard (contains exemplary coding that cannot be re-used from within tools build on top of Graphiti)</em></li>
    <li><strong>org.eclipse.graphiti.examples.tutorial</strong>
<em>The final implementation of the Graphiti tutorial</em></li>
    <li><strong>org.eclipse.graphiti.ui.capabilities</strong>
<em>A small example showing how the Eclipse capabilities mechanism can be used with Graphiti</em></li>
    <li><strong>org.eclipse.graphiti.feature</strong>
<em>The feature containing purely the Graphiti framework without any additional functionality like SVG export. This feature needs to be included into Eclipse installations containing tools build on top of Graphiti</em></li>
  </ul>
</blockquote>

<h3 id="create-plug-in">1. Create Plug-in</h3>

<p>Create a blank plug-in project using new project wizard. Add following dependencies :</p>

<ul>
  <li><em>org.eclipse.graphiti</em></li>
  <li><em>org.eclipse.graphiti.ui</em></li>
  <li><em>org.eclipse.graphiti.examples.common</em></li>
  <li><em>org.eclipse.core.resources</em></li>
  <li><em>org.eclipse.core.runtime</em></li>
  <li><em>org.eclipse.ui.views.properties.tabbed</em></li>
</ul>

<h3 id="diagram-type-agent">2. Diagram Type Agent</h3>

<p>A <strong>diagram type agent</strong> should be implemented for creation of an editor of a viewer. As mentioned before, it consists of a <strong>diagram type provider</strong> and a <strong>feature provider</strong></p>

<h4 id="create-a-diagram-type-provider">Create a Diagram Type Provider</h4>

<p>Add a new package according to the project, create a new class extend the base class <em>AbstractDiagramTypeProvider</em> in oder to implement the interface <em>iDiagramTypeProvider</em>.</p>

<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="n">rwth</span><span class="o">.</span><span class="na">ice</span><span class="o">.</span><span class="na">graphiti</span><span class="o">.</span><span class="na">helloworld</span><span class="o">.</span><span class="na">diagram</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.eclipse.graphiti.dt.AbstractDiagramTypeProvider</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">HelloDiagramTypeProvider</span> <span class="kd">extends</span> <span class="n">AbstractDiagramTypeProvider</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="nf">HelloDiagramTypeProvider</span><span class="o">()</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">();</span>
  <span class="o">}</span>
  
<span class="o">}</span></code></pre></div>

<p>Add a new extension using the extension tab within MANIFEST.MF editor with the extension point <strong><em>org.eclipse.graphiti.ui.diagramTypeProviders</em></strong>. Set the corresponding ID, name, and set the class to the just created one.</p>

<h4 id="create-a-new-diagram-type-of-the-provider">Create a new Diagram Type of the Provider</h4>

<p>Add a new Diagram Type with extension point <strong><em>org.eclipse.graphiti.ui.diagramTypes</em></strong>, set its ID, name and save it. Right click on the <strong><em>Diagram Type Provider</em></strong> extension in the list and add a Diagram Type, choose the Diagram type just created.</p>

<p>After these steps, the plugin.xml file should looks like this:</p>

<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="cp">&lt;?eclipse version=&quot;3.4&quot;?&gt;</span>
<span class="nt">&lt;plugin&gt;</span>
   <span class="nt">&lt;extension</span>
         <span class="na">point=</span><span class="s">&quot;org.eclipse.graphiti.ui.diagramTypes&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;diagramType</span>
            <span class="na">id=</span><span class="s">&quot;de.rwth-aachen.ice.graphiti.helloworld.hellodiagramtype&quot;</span>
            <span class="na">name=</span><span class="s">&quot;hello diagramtype&quot;</span>
            <span class="na">type=</span><span class="s">&quot;Helloworld&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;/diagramType&gt;</span>
   <span class="nt">&lt;/extension&gt;</span>
   <span class="nt">&lt;extension</span>
         <span class="na">point=</span><span class="s">&quot;org.eclipse.graphiti.ui.diagramTypeProviders&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;diagramTypeProvider</span>
            <span class="na">class=</span><span class="s">&quot;rwth.ice.graphiti.helloworld.diagram.HelloDiagramTypeProvider&quot;</span>
            <span class="na">context=</span><span class="s">&quot;org.eclipse.graphiti.ui.diagramEditor&quot;</span>
            <span class="na">id=</span><span class="s">&quot;de.rwth-aachen.ice.graphiti.helloworld.HelloDiagramTypeProvider&quot;</span>
            <span class="na">name=</span><span class="s">&quot;My first Diagram Type Provider&quot;</span><span class="nt">&gt;</span>
         <span class="nt">&lt;diagramType</span>
               <span class="na">id=</span><span class="s">&quot;de.rwth-aachen.ice.graphiti.helloworld.hellodiagramtype&quot;</span><span class="nt">&gt;</span>
         <span class="nt">&lt;/diagramType&gt;</span>
      <span class="nt">&lt;/diagramTypeProvider&gt;</span>
   <span class="nt">&lt;/extension&gt;</span>

<span class="nt">&lt;/plugin&gt;</span></code></pre></div>

<h4 id="create-a-feature-provider">Create a Feature Provider</h4>

<p>Create a now class extends <strong><em>DefaultFeatureProvider</em></strong> in oder to implement the <em>IFeatureProvider</em> interface. Initially, we don’t need to overwrite any methods.</p>

<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="n">rwth</span><span class="o">.</span><span class="na">ice</span><span class="o">.</span><span class="na">graphiti</span><span class="o">.</span><span class="na">helloworld</span><span class="o">.</span><span class="na">diagram</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.eclipse.graphiti.dt.IDiagramTypeProvider</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.eclipse.graphiti.ui.features.DefaultFeatureProvider</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">HelloFeatureProvider</span> <span class="kd">extends</span> <span class="n">DefaultFeatureProvider</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="nf">HelloFeatureProvider</span><span class="o">(</span><span class="n">IDiagramTypeProvider</span> <span class="n">dtp</span><span class="o">){</span>
    <span class="kd">super</span><span class="o">(</span><span class="n">dtp</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></div>

<p>We need to create and set it in the construction of Diagram Type Provider as well. Add one line in the construction of DiagramTypeProvider:</p>

<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="nf">HelloDiagramTypeProvider</span><span class="o">()</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">();</span>
    <span class="n">setFeatureProvider</span><span class="o">(</span><span class="k">new</span> <span class="nf">HelloFeatureProvider</span><span class="o">(</span><span class="k">this</span><span class="o">));</span>
  <span class="o">}</span></code></pre></div>


      <hr />
      <footer role="contentinfo">
        <div class="article-author-bottom">
          



	<img src="http://naiqus.github.io/images/mao.jpg" class="bio-photo" alt="Naiqus bio photo">

<h3>Naiqus</h3>
<p>Wake up man, wake up!!!</p>

<a href="http://twitter.com/naiqus" class="author-social" target="_blank"><i class="fa fa-fw fa-twitter-square"></i> Twitter</a>
<a href="http://facebook.com/suqian.zhang" class="author-social" target="_blank"><i class="fa fa-fw fa-facebook-square"></i> Facebook</a>
<a href="http://plus.google.com/+sootsan" class="author-social" target="_blank"><i class="fa fa-fw fa-google-plus-square"></i> Google+</a>



<a href="http://github.com/naiqus" class="author-social" target="_blank"><i class="fa fa-fw fa-github"></i> Github</a>








        </div>
        <p class="byline"><strong>Eclipse Grafiti Learning Notes</strong> was published on <time datetime="2014-11-10T01:39:07+01:00">November 10, 2014</time>.</p>
      </footer>
    </div><!-- /.article-wrap -->
  
    <section id="disqus_thread"></section><!-- /#disqus_thread -->
  
  </article>
</div><!-- /#main -->

<div class="footer-wrap">
  <div class="related-articles">
  <h4>You might also enjoy <small class="pull-right">(<a href="http://naiqus.github.io/posts/">View all posts</a>)</small></h4>
    <ul>
    
      <li><a href="http://naiqus.github.io/using-discourse-api-java-in-android-studio/" title="Using Discourse-API-Java in Android Studio">Using Discourse-API-Java in Android Studio</a></li>
    
      <li><a href="http://naiqus.github.io/wechat-mp-for-discourse-development/" title="Wechat MP for Discourse Forum">Wechat MP for Discourse Forum</a></li>
    
      <li><a href="http://naiqus.github.io/hello-world-again/" title="Hello World, again!">Hello World, again!</a></li>
    
    </ul>
    <hr />
  </div><!-- /.related-articles -->
  <footer>
    

<span>&copy; 2015 Naiqus.</span>

  </footer>
</div><!-- /.footer-wrap -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://naiqus.github.io/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="http://naiqus.github.io/assets/js/scripts.min.js"></script>

<!-- Asynchronous Google Analytics snippet -->
<script>
  var _gaq = _gaq || [];
  var pluginUrl = 
 '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
  _gaq.push(['_require', 'inpage_linkid', pluginUrl]);
  _gaq.push(['_setAccount', 'UA-24975605-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>


  
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'naiqus'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

	        

</body>
</html>